Macro.add("tabs",{skipArgs:!1,tags:["tab","/tab"],handler:function(){const a=$("<div class='tabs-tabset'>"),b=$("<div class='tabs-tabs'>"),c=$("<div class='tabs-contents'>"),d=[],e=[];let f=0,g=0,h="",j=!1,k=0,l="left";for(const b of this.args)["left","right","top","stacked","wrapped","responsive-left","responsive-right","responsive-stacked","responsive-wrapped"].includes(b)?(console.log("arg "+b+" is class"),"responsive"==b.substring(0,10)?(j=!0,l=b.substring(11)):a.addClass(b)):parseInt(b)?k=parseInt(b):(h=this.args[0]+"-",a.attr("id",this.args[0]));for(var m=0,n=this.payload.length;m<n;++m)if("tab"==this.payload[m].name){let b=this.payload[m].args[0],c="tabs-contents-"+b.trim().toLowerCase().replace(/[^a-z0-9]/g,"").replace(/\s+/g,"-"),i=`<span>${b}</span>`;this.payload[m].args[1]&&"string"==typeof this.payload[m].args[1]&&(i=`<img src="${this.payload[m].args[1]}">`);let j=$(`<button id="${c}-control">${i}</button>`).ariaClick(function(){$(a).find(".tabs-tabs button").removeClass("selected"),$(a).find(".tabs-content").addClass("hidden"),$(a).find(`#${h}${c}`).removeClass("hidden"),$(this).addClass("selected")});d.push(j),e.push($(`<div class="tabs-content hidden" id="${h}${c}">`).wiki(this.payload[m].contents.trim())),1<this.payload[m].args.length&&!0===this.payload[m].args[this.payload[m].args.length-1]&&(g=f),f++}if(d[g].addClass("selected"),e[g].removeClass("hidden"),b.append(...d),c.append(...e),a.attr("style",`--cols:${f}`).append(b,c),$(this.output).append(a),j)if(window.resizeObserver){const b=new ResizeObserver(b=>{window.requestAnimationFrame(()=>{let c=b[0],d=0;d=c.contentBoxSize?c.contentBoxSize[0].inlineSize:c.contentRect.width,d&&d<=k?a.addClass(l):a.removeClass(l)})});b.observe(a[0])}else $(window).on("resize",function(){let b=a.width();b&&b<=k?a.addClass(l):a.removeClass(l)})}});